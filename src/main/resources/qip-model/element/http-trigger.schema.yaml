---
$id: http://qubership.org/schemas/product/qip/element/http-trigger.schema.yaml
$schema: http://json-schema.org/draft-07/schema
type: object
allOf:
  - $ref: "../base.schema.yaml#/definitions/CommonEntityProperties"
  - $ref: "../base.schema.yaml#/definitions/WithDescription"
title: Http Trigger
description: >
  HTTP Trigger provides an HTTP endpoint for consuming arriving HTTP requests.
properties:
  type:
    type: string
    const: http-trigger
  properties:
    type: object
    allOf:
      - $ref: "properties/correlation-id.schema.yaml"
      - $ref: "properties/idempotency.schema.yaml"
    properties:
      abacResource:
        type: string
      accessControlType:
        type: string
        enum:
          - RBAC
          - ABAC
      actionOnDuplicate:
        type: string
        enum:
          - ignore
          - throw-exception
          - execute-subchain
      allowedContentTypes:
        type: array
        items:
          type: string
      chainCallTimeout:
        type: integer
      chainTriggerElementId:
        type: string
      chunked:
        type: boolean
      connectTimeout:
        type: integer
      contextPath:
        type: string
      correlationIdName:
        type: string
      correlationIdPosition:
        type: string
        enum:
          - Header
          - Body
      enableIdempotency:
        type: boolean
      externalRoute:
        type: boolean
      handleChainFailureAction:
        type: string
        enum:
          - default
          - script
          - mapper-2
          - chain-call
      handleValidationAction:
        type: string
        enum:
          - default
          - script
          - mapper-2
      handlerContainer:
        type: object
        additionalProperties: false
        properties:
          script:
            type: string
      httpBinding:
        type: string
      httpMethodRestrict:
        type: string
      idempotencyKeyExpiry:
        type: integer
      idempotencyKeyExpression:
        type: string
      invalidURI:
        type: boolean
      killSessionOnTimeout:
        type: boolean
      privateRoute:
        type: boolean
      rejectRequestIfNonNullBodyGetDelete:
        type: boolean
      responseFilter:
        type: boolean
      roles:
        type: array
        items:
          type: string
      validationSchema:
        type: string
    required:
      - contextPath
      - httpBinding
    additionalProperties: false
