---
$id: http://qubership.org/schemas/product/qip/chain
$schema: https://json-schema.org/draft-07/schema
type: object
title: Chain
group: Integrations
required:
  - id
  - $schema
  - name
  - content
properties:
  id:
    type: string
  $schema:
    type: string
  name:
    type: string
  content:
    type: object
    required:
      - id
      - name
      - migrations
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
      description:
        type: string
      modifiedWhen:
        type: integer
      businessDescription:
        type: string
      assumptions:
        type: string
      outOfScope:
        type: string
      labels:
        type: array
        items:
          type: string
      maskedFields:
        type: array
        items:
          type: object
          required:
            - name
          properties:
            name:
              type: string
      elements:
        type: array
        items:
          $ref: '#/definitions/chainElement'
      dependencies:
        type: array
        items:
          type: object
          required:
            - from
            - to
          properties:
            from:
              type: string
              format: uuid
            to:
              type: string
              format: uuid
      deployments:
        type: array
        items:
          type: object
          required:
            - domain
          properties:
            domain:
              type: string
      deployAction:
        type: string
        enum:
          - DEPLOY
          - SNAPSHOT
          - NONE
      migrations:
        type: array
        items:
          type: string
definitions:
  chainElement:
    type: object
    required:
      - id
      - name
      - element-type
      - properties
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
      description:
        type: string
      element-type:
        type: string
      properties-filename:
        type: string
      properties:
        oneOf:
          - $ref: './elements/httpSender.yaml'
          - $ref: './elements/kafkaSender2.yaml'
          - $ref: './elements/kafkaTrigger2.yaml'
          - $ref: './elements/script.yaml'
          - $ref: './elements/httpTrigger.yaml'
